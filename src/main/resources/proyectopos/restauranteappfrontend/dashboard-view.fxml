<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.TilePane?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/20.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="proyectopos.restauranteappfrontend.controllers.DashboardController"
            prefHeight="750.0" prefWidth="1280.0"
            styleClass="background">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20"
              style="-fx-background-color: white; -fx-padding: 15 25; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 2);">
            <Label text="Raíz Iqueña" styleClass="h2" style="-fx-text-fill: -fx-accent;"/>
            <Separator orientation="VERTICAL" />
            <Label fx:id="infoLabel" text="Bienvenido" styleClass="lbl-info" style="-fx-font-size: 14px;"/>
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
        </HBox>
    </top>

    <center>
        <StackPane>
            <padding>
                <Insets top="10" right="20" bottom="15" left="20"/>
            </padding>

            <!-- VISTA DE MESAS (principal) -->
            <VBox spacing="25" alignment="TOP_CENTER">

                <HBox alignment="CENTER_LEFT">
                    <Label text="Seleccione una Mesa" styleClass="h2 text-title"/>
                </HBox>

<ScrollPane fitToWidth="true" fitToHeight="true" styleClass="scroll-transparent" VBox.vgrow="ALWAYS">
    <content>
        <TilePane fx:id="mesasContainer"
          hgap="20" vgap="20"
          prefColumns="6"
          alignment="TOP_CENTER"
          prefTileWidth="180"
          prefTileHeight="180"
          style="-fx-padding: 20;">
    <Label text="Cargando mesas..." styleClass="text-muted"/>
</TilePane>
    </content>
</ScrollPane>


            </VBox>

            <!-- PANEL que aparece cuando se selecciona una mesa -->
            <VBox fx:id="gestionPedidoPane" spacing="15" visible="false" managed="false"
                  styleClass="pedido-pane" VBox.vgrow="ALWAYS">

                <HBox alignment="CENTER_LEFT" spacing="15">
                    <Button text="← Volver a Mesas" onAction="#handleVolverMesas" styleClass="btn-secondary"/>
                    <Label fx:id="mesaSeleccionadaLabel" text="Mesa: (Ninguna)" styleClass="h3"/>
                </HBox>

                <!-- CONTENIDO: Categorías | Productos | Order Panel -->
                <HBox spacing="12" VBox.vgrow="ALWAYS">

                <!-- COLUMNA 1: CATEGORÍAS -->
                <VBox spacing="12" HBox.hgrow="NEVER" minWidth="210" maxWidth="230"
                styleClass="card" style="-fx-padding: 12;">

                <Label text="Categorías" styleClass="h3" style="-fx-font-size: 15;"/>

                 <ListView fx:id="categoriasListView"
                VBox.vgrow="NEVER"
                  prefHeight="250"
                 styleClass="list-view"/>

                <Separator style="-fx-opacity:0.5;"/>   

                <Label text="Subcategorías" styleClass="h3" style="-fx-font-size: 15;"/>

                <ListView 
                fx:id="subCategoriasListView"
                VBox.vgrow="ALWAYS"
              styleClass="list-view"/>
                </VBox>

                    
                    

                    <!-- COLUMNA 2: PRODUCTOS (catálogo) -->
                    <VBox fx:id="contenedorProductos" spacing="10" HBox.hgrow="SOMETIMES" maxWidth="700" VBox.vgrow="ALWAYS">
                        <Label text="Menú" styleClass="h3"/>
                        <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="scroll-transparent">
                            <content>
                                <TilePane fx:id="productosContainer" hgap="20" vgap="20" prefColumns="4" style="-fx-padding: 10;"/>
                            </content>
                        </ScrollPane>
                    </VBox>

                    <!-- COLUMNA 3: PANEL DE ORDEN (incluir FXML) -->
                    <fx:include fx:id="orderPanel" source="order-panel.fxml" HBox.hgrow="NEVER"/>

                </HBox>

            </VBox>

        </StackPane>
    </center>

</BorderPane>
